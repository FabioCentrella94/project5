"use strict";(self.webpackChunkproject5_frontend=self.webpackChunkproject5_frontend||[]).push([[543],{7543:function(t,e,a){a.r(e);a(8992),a(3949);let n=document.getElementById("loadingGif"),l=document.getElementById("alert");document.getElementById("cartContainer");if(navigator.onLine){let t=document.getElementById("cart");if(null===localStorage.getItem("totalItemInCart")){document.getElementById("displayTotalItem").textContent="Cart (0)"}else document.getElementById("displayTotalItem").textContent="Cart ("+localStorage.getItem("totalItemInCart")+")";let e=[];for(let t in localStorage)localStorage.hasOwnProperty(t)&&e.push(JSON.parse(localStorage[t]));let a=[];e.forEach((t=>{Object.keys(t).forEach((e=>{a.push(t[e])}))}));let r=[];for(i=0;i<a.length;i++)r[i]=new Array(a[i].quantity).fill(a[i].id);let o=[].concat.apply([],r);for(i=0;i<a.length;i++){let t=document.createElement("figure");t.setAttribute("class","col-12");let e=document.createElement("img");e.src=a[i].image,t.appendChild(e);let n=document.createElement("figcaption");t.appendChild(n);let l=document.createElement("p");l.textContent=a[i].color,n.appendChild(l);let r=document.createElement("p");r.textContent="$"+(a[i].price/100).toFixed(2),n.appendChild(r);let o=document.createElement("div");o.style.display="flex",o.style.justifyContent="space-around",o.style.alignItems="center",n.appendChild(o);let m=document.createElement("button");m.textContent="-",m.value=a[i].color,m.name=a[i].id,m.setAttribute("class","minusButton bg-secondary text-light rounded-circle"),o.appendChild(m);let d=document.createElement("p");d.textContent=a[i].quantity,o.appendChild(d);let c=document.createElement("button");c.textContent="+",c.value=a[i].color,c.name=a[i].id,c.setAttribute("class","plusButton bg-secondary text-light rounded-circle"),o.appendChild(c);let g=document.createElement("p");g.textContent="$"+(a[i].price*a[i].quantity/100).toFixed(2),n.appendChild(g);let u=document.createElement("button");u.setAttribute("class","removeItem bg-secondary text-light"),u.textContent="Remove Item",u.value=a[i].color,u.name=a[i].id,n.appendChild(u),document.getElementById("cart").appendChild(t)}let m=document.querySelectorAll(".minusButton");for(i=0;i<m.length;i++)m[i].addEventListener("click",(e=>{let a=localStorage.getItem("totalItemInCart");a=parseInt(a),localStorage.setItem("totalItemInCart",a-1),itemInCart=localStorage.getItem(e.target.name),itemInCart=JSON.parse(itemInCart),document.getElementById("displayTotalItem").textContent="Cart ("+localStorage.getItem("totalItemInCart")+")";let n=localStorage.getItem("totalCost");n=parseInt(n),localStorage.setItem("totalCost",n-itemInCart[e.target.value].price),itemInCart[e.target.value].quantity>1?(itemInCart[e.target.value].quantity-=1,e.target.parentElement.nextElementSibling.textContent="$"+(itemInCart[e.target.value].price*itemInCart[e.target.value].quantity/100).toFixed(2)):delete itemInCart[e.target.value],localStorage.setItem(e.target.name,JSON.stringify(itemInCart)),"{}"==localStorage.getItem(e.target.name)&&localStorage.removeItem(e.target.name),e.target.nextSibling.textContent=Number(e.target.nextSibling.textContent)-1,e.target.nextSibling.textContent<1&&(l.removeAttribute("hidden"),setTimeout((()=>{l.setAttribute("hidden","true")}),1e3),t.removeChild(e.target.parentElement.parentElement.parentElement)),t.childNodes.length<1&&location.reload()}));let d=document.querySelectorAll(".plusButton");for(i=0;i<d.length;i++)d[i].addEventListener("click",(t=>{let e=localStorage.getItem("totalItemInCart");e=parseInt(e),localStorage.setItem("totalItemInCart",e+1),itemInCart=localStorage.getItem(t.target.name),itemInCart=JSON.parse(itemInCart),document.getElementById("displayTotalItem").textContent="Cart ("+localStorage.getItem("totalItemInCart")+")",itemInCart[t.target.value].quantity+=1,t.target.parentElement.nextElementSibling.textContent="$"+(itemInCart[t.target.value].price*itemInCart[t.target.value].quantity/100).toFixed(2),localStorage.setItem(t.target.name,JSON.stringify(itemInCart));let a=localStorage.getItem("totalCost");a=parseInt(a),localStorage.setItem("totalCost",a+itemInCart[t.target.value].price),t.target.previousSibling.textContent=Number(t.target.previousSibling.textContent)+1}));let c=document.querySelectorAll(".removeItem");for(i=0;i<c.length;i++)c[i].addEventListener("click",(e=>{l.removeAttribute("hidden"),setTimeout((()=>{l.setAttribute("hidden","true")}),1e3);let a=localStorage.getItem("totalItemInCart");a=parseInt(a),itemInCart=localStorage.getItem(e.target.name),itemInCart=JSON.parse(itemInCart);let n=localStorage.getItem("totalCost");n=parseInt(n),localStorage.setItem("totalCost",n-itemInCart[e.target.value].price*itemInCart[e.target.value].quantity),localStorage.setItem("totalItemInCart",a-itemInCart[e.target.value].quantity),delete itemInCart[e.target.value],localStorage.setItem(e.target.name,JSON.stringify(itemInCart)),document.getElementById("displayTotalItem").textContent="Cart ("+localStorage.getItem("totalItemInCart")+")","{}"==localStorage.getItem(e.target.name)&&localStorage.removeItem(e.target.name),t.removeChild(e.target.previousSibling.parentElement.parentElement),t.childNodes.length<1&&location.reload()}));let g={firstName:"",lastName:"",address:"",city:"",email:""},u=document.querySelectorAll(".form-group");for(i=0;i<u.length;i++){let t=document.createElement("p");u[i].appendChild(t)}let s=document.getElementById("submitOrder"),p=document.querySelectorAll("input"),I=document.getElementById("inputForm"),C=document.getElementById("formContainer");if(o.length>=1)for(I.removeAttribute("hidden"),i=0;i<p.length;i++)p[i].addEventListener("input",(t=>{h(t)})),p[i].addEventListener("blur",(t=>{h(t)}));else{I.setAttribute("hidden","true");let t=document.createElement("p");t.setAttribute("class","font-weight-bold mt-5"),t.textContent="Your Cart Is Empty",C.appendChild(t)}const h=t=>{t.target.value.length<1?(t.target.style.border="2px solid red",t.target.nextElementSibling.style.color="red",t.target.nextElementSibling.textContent="Field Required"):t.target.value.length>=1&&!t.target.value.match(t.target.pattern)?(t.target.style.border="2px solid red",t.target.nextElementSibling.style.color="red",t.target.nextElementSibling.textContent="Format Not Valid"):(t.target.style.border="2px solid greenyellow",t.target.nextElementSibling.style.color="green",t.target.nextElementSibling.textContent="Valid "+t.target.name)};for(i=0;i<p.length;i++)p[i].addEventListener("input",(()=>{p[0].value.length>=1&&p[0].value.match(p[0].pattern)&&p[1].value.length>=1&&p[1].value.match(p[1].pattern)&&p[2].value.length>=1&&p[2].value.match(p[2].pattern)&&p[3].value.length>=1&&p[3].value.match(p[3].pattern)&&p[4].value.length>=1&&p[4].value.match(p[4].pattern)?s.removeAttribute("hidden"):s.setAttribute("hidden","true")}));s.addEventListener("click",(t=>{for(document.getElementById("cartPage").setAttribute("hidden","true"),n.removeAttribute("hidden"),t.preventDefault(),y(),p[0].value.length>=1&&p[0].value.match(p[0].pattern)&&p[1].value.length>=1&&p[1].value.match(p[1].pattern)&&p[2].value.length>=1&&p[2].value.match(p[2].pattern)&&p[3].value.length>=1&&p[3].value.match(p[3].pattern)&&p[4].value.length>=1&&p[4].value.match(p[4].pattern)&&v(),i=0;i<p.length;i++)p[i].value=""}));const y=()=>{g.firstName=p[0].value,g.lastName=p[1].value,g.address=p[2].value,g.city=p[3].value,g.email=p[4].value},v=()=>{const t=new Promise(((t,e)=>{let a=[];for(let t in localStorage)localStorage.hasOwnProperty(t)&&a.push(JSON.parse(localStorage[t]));let n=[];a.forEach((function(t){Object.keys(t).forEach((e=>{n.push(t[e])}))}));let l=[];for(i=0;i<n.length;i++)l[i]=new Array(n[i].quantity).fill(n[i].id);let r=[].concat.apply([],l),o=new XMLHttpRequest,m={contact:g,products:r};o.open("POST","https://project5-backend.myportfolio.training/api/teddies/order",!0),o.setRequestHeader("Content-type","application/json"),o.send(JSON.stringify(m)),o.onreadystatechange=()=>{4===o.readyState&&(201===o.status?t(JSON.parse(o.response)):e(o.response))}}));t.then((t=>{sessionStorage.setItem("orderTotalPrice",localStorage.getItem("totalCost")),localStorage.clear(),sessionStorage.setItem("orderDetail",JSON.stringify(t)),location.href="orderConfirmation.html"})).catch((t=>{if(null===localStorage.getItem("totalItemInCart")){document.getElementById("displayTotalItem").textContent="Cart (0)"}else document.getElementById("displayTotalItem").textContent="Cart ("+localStorage.getItem("totalItemIncart")+")";if(console.log(t),n.setAttribute("hidden","true"),t){let t=document.createElement("p");t.textContent="There is a problem with the backend";let e=document.getElementById("cartPage");e.removeAttribute("hidden"),e.removeChild(e.childNodes[1]),I.setAttribute("hidden","true"),C.className="col-12 text-center pt-5",C.appendChild(t)}else{let t=document.createElement("p");t.textContent="Error: Network Error";let e=document.getElementById("cartPage");e.removeAttribute("hidden"),e.removeChild(e.childNodes[1]),I.setAttribute("hidden","true"),C.className="col-12 text-center pt-5",C.appendChild(t)}}))}}else window.document.addEventListener("DOMContentLoaded",(()=>{if(null===localStorage.getItem("totalItemInCart")){document.getElementById("displayTotalItem").textContent="Cart (0)"}else document.getElementById("displayTotalItem").textContent="Cart ("+localStorage.getItem("totalItemInCart")+")";n.setAttribute("hidden","true");let t=document.getElementById("cartPage");t.removeAttribute("hidden"),t.removeChild(t.childNodes[1]),document.getElementById("inputForm").setAttribute("hidden","true");let e=document.getElementById("formContainer");e.className="col-12 text-center pt-5",e.innerHTML="No Connection"}))}}]);